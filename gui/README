========================================================
Short introduction on usage of the BOPcat GUI
A. N. Ladines
========================================================

The BOPcat GUI aims to enable the user to run single 
BOPcat optimization or sequential parameterization 
without having to write a python script.

The GUI is launched by running bopcatgui.py
This will initially load the start page displaying the
versions of BOPfox and ASE that will be used by BOPcat.
The terms and conditions can be viewed by clicking on
the red text "terms and conditions". 

In the main window, one should provide the elements and
their properties by clicking on "Add" and supplying the
necessary values (symbol, free atom energy and initial
magnetic moment). The filename of the "fit file" should
also be supplied under Reference data. The "modelsbx" 
filename should also be provided together with the name
of the model under Model. One then needs to pick an 
optimizer from the least under Optimizer and specify
the number of parallel processes and the corresponding
queue under Calculator.

By clicking on "More" in Reference data, one proceeds
to the Reference data window. Here, one can add fitting
structures by clicking "Add" beside Fit Structures. 
One provides identifier for the structure, e.g part 
of the structure name (bcc_volume*). Refer to the BOPcat
manual on how to specify an identifier. If required, the
structures will be sorted according to the user's choice
and the maximum number of structures can be specified.
The required filters are can also be specified. When all 
identifiers and filters are specified for the fit structures, 
click on "Load structures" to generate the reference data.
A histogram of the bond lengths in all the reference atoms
is also displayed. To display and edit information of the 
reference atoms, one should click "Show details". The 
information can be edited by clicking on the entry. However,
only the Structure and Weight can be edited. For the Weight,
one can also put a formula which will be applied to all
cells below the current field. For example, one can put

=np.exp(-0.5*(ENERGY[i]/NATOM[i]-ENERGY[0]/NATOM[0]))

Do not forget the prefix "=". At the moment one can only
use the following variables (arrays): ENERGY, NATOM, MAXFORCE,
MAXSTRESS, VOLUME.

To navigate around other windows, click View. From the Home
window, one can launch the Model window by clicking "More"
in Model. To display the model parameters, click "Load" and 
choose the atom or bond to display. One can plot the functions
for the bonds by clicking "Plot". To toggle the display, one
can click also on the bond key. To test the model on the 
structures chosen in Reference data, one can click on "Test".
The parameters can be edited by clicking on the entry. To
set a parameter as a fitting variable, one should double click
the left button on the corresponding field. This will toggle
the color of the field from green to red which means that
the parameter will now be a fitting variable. To rattle
the value of a fitting variable, one must first engage the 
rattle command by double clicking the "Rattle" button. This 
will also toggle the color of the button from green to red.
One can then specify the mode (gaussian/uniform) and the
factor(width) of the rattling. One can also restore the model
to the original values or clear the model which means the
values will be loaded again from the chosen file.

The optimizer options can be specified by clicking on "More"
in Optimizer and subsequently clicking on the name of the
optimizer. Similarly, the BOPfox settings can be set by 
clicking on "More" in Calculator and subsequently clicking
"BOPfox settings".

To run the optimization based on the current settings, one
should click "Run" in the Home window. This will display the
start and current values of the parameters and the progress
of the rms. 

++++++++
Tools
++++++++

Parameterization
Sequential optimization can be carried out with this tool.
Click on "Add layer" to add a layer in the parameterization.
A layer may consist of an optimization step, testing step
and a model manager. For the optimization and testing steps,
several kernels can be generated by clicking "Add opt." and
"Add test". This will create a kernel button with a red 
background. A red bg means that the kernel is not yet set.
Clicking on the kernel button will toggle the bg to green
which means that the kernel is created from the current
setting in the Reference data, Model, Optimizer and Calculator
windows. Clicking on the kernel button again will unset it
to allow for corrections, for example. One can also delete
a kernel by right double clicking on it. One can then
attach a testing kernel for each optimization kernel. The 
methods for creating a testing kernel is the same. A model
manager is used to generate a starting model for the next
layer from the optimized models. "Best", for example will 
take the model with the lowest rms from the optimization
or testing kernels. Note that if the "Rattle" option 
in Model is engaged for a particular kernel, the starting 
model wil be rattled. When all kernels are set, click
"Run" to start the parameterization. The status of the processes 
is indicated by the status bar: blue is set, yellow is
running and green is done. For serial calculations however,
the status of the kernels is updated per sublayer.
The optimized model at each step is
printed as model_optimized_nl_nm_nk.bx where nl is the 
layer index, nm is 0-opt or 1-test and nk is the kernel index.
The best model from each layer is written as model_best_nl.bx



